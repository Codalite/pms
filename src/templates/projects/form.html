{# src/views/projects/form.html #}

{% extends "layouts/base.html" %}

{% block content %}
<div class="container py-4">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <h1 class="mb-4">
        {{ "Edit project" if project else "New project" }}
      </h1>

      <form method="post" action="{{ '/projects/' + project._id if project else '/projects' }}">
        <input type="hidden" name="_csrf" value="{{ csrfToken }}">

        <div class="mb-3">
          <label for="name" class="form-label">Name</label>
          <input 
            type="text" 
            class="form-control" 
            id="name" 
            name="name" 
            value="{{ project.name if project else '' }}" 
            required
          >
        </div>

        <div class="mb-3">
          <label for="description" class="form-label">Description</label>
          <textarea 
            class="form-control" 
            id="description" 
            name="description" 
            rows="4"
          >{{ project.description if project else '' }}</textarea>
        </div>

        <button type="submit" class="btn btn-primary">
          {{ "Save" if project else "Create" }}
        </button>
      </form>

      {% if project %}
      <form 
        method="post" 
        action="/projects/{{ project._id }}/delete" 
        class="mt-4"
      >
        <input type="hidden" name="_csrf" value="{{ csrfToken }}">
        <button 
          type="submit" 
          class="btn btn-outline-danger" 
          onclick="return confirm('Delete project?')"
        >
          Delete
        </button>
      </form>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}